const traducciones = {
    es: {
        // Navbar
        nav_logo: "logo",
        nav_productos: "Productos",
        nav_acerca: "Acerca de",
        nav_iniciar_sesion: "Iniciar sesiÃ³n",
        nav_carrito: "Carrito",
        nav_idioma: "ðŸŒ ES",
        nav_hola: "ðŸ‘¤ Hola,",
        nav_cerrar_sesion: "Cerrar sesiÃ³n",
        
        // Carrusel
        cargando_productos: "Cargando productos...",
        no_productos: "No hay productos disponibles",
        
        // Producto destacado
        producto_destacado: "Producto Destacado",
        disponible: "Disponible",
        no_disponible: "No disponible",
        btn_agregar_carrito: "Agregar al Carrito",
        
        // Carrito
        carrito_compras: "Carrito de Compras",
        carrito_vacio: "Tu carrito estÃ¡ vacÃ­o",
        total: "Total:",
        btn_finalizar: "Finalizar Compra",
        eliminar: "Eliminar",
        
        // Otros productos
        otros_productos: "Otros Productos",
        
        // Acerca de
        acerca_titulo: "Acerca de Ghuali",
        acerca_p1: "En Ghuali creemos que la mejor forma de expresarte es a travÃ©s de lo que llevas puesto. Somos una empresa dedicada al diseÃ±o y creaciÃ³n de productos personalizados, donde cada detalle cuenta y cada prenda tiene una historia que contar.",
        acerca_p2: "Nos especializamos en artÃ­culos como camisas, tirantes y otros complementos, todos pensados para adaptarse a tu estilo, tu personalidad y tus ideas. Ya sea un diseÃ±o elegante, atrevido, minimalista o totalmente Ãºnico, en Ghuali transformamos tus ideas en productos reales, hechos con cuidado y dedicaciÃ³n.",
        acerca_p3: "Trabajamos con materiales de calidad y apostamos por un proceso creativo cercano, donde el cliente forma parte del resultado final. Nuestro objetivo no es solo vender productos, sino crear piezas que te representen y te hagan sentir autÃ©ntico.",
        acerca_p4: "En Ghuali, la personalizaciÃ³n no es un extra: es nuestra esencia.",
        
        // Footer
        footer_derechos: "Â©2008 Fashion. Todos los derechos de autor reservados",
        
        // Modal Login
        modal_login_titulo: "Iniciar sesiÃ³n",
        modal_email: "Correo electrÃ³nico",
        modal_contrasena: "ContraseÃ±a",
        modal_entrar: "Entrar",
        modal_no_cuenta: "Â¿No tienes cuenta?",
        modal_registrate: "RegÃ­strate",
        
        // Modal Registro
        modal_registro_titulo: "Registro de usuario",
        modal_dni: "DNI / NIE",
        modal_dni_info: "Formato vÃ¡lido: 12345678Z o X1234567L",
        modal_nombre: "Nombre",
        modal_nombre_info: "Debe comenzar con mayÃºscula",
        modal_email_info: "Debe ser un email vÃ¡lido",
        modal_telefono: "TelÃ©fono",
        modal_telefono_info: "Debe comenzar por 6 o 7 (ej: 622334455)",
        modal_iban: "IBAN",
        modal_iban_info: "Ejemplo: ES7620770024003102575766",
        modal_contrasena_info: "12 caracteres, letras, nÃºmeros y un sÃ­mbolo",
        modal_registrarse: "Registrarse",
        modal_ya_cuenta: "Â¿Ya tienes cuenta?",
        modal_inicia_sesion: "Inicia sesiÃ³n",
        
        // Alertas
        alert_agregado: "agregado al carrito",
        alert_sesion_cerrada: "SesiÃ³n cerrada exitosamente",
        alert_bienvenido: "Â¡Bienvenido",
        alert_error: "Error:",
        alert_error_servidor: "Error al conectar con el servidor",
        alert_error_sesion: "Error al cerrar sesiÃ³n",
        alert_corregir_errores: "Por favor, corrige los errores en el formulario",
        alert_registrado: "Usuario registrado exitosamente\nAhora puedes iniciar sesiÃ³n",
        alert_cerrar_sesion: "Â¿Deseas cerrar sesiÃ³n?"
    },
    
    en: {
        // Navbar
        nav_logo: "logo",
        nav_productos: "Products",
        nav_acerca: "About",
        nav_iniciar_sesion: "Log in",
        nav_carrito: "Cart",
        nav_idioma: "ðŸŒ EN",
        nav_hola: "ðŸ‘¤ Hello,",
        nav_cerrar_sesion: "Log out",
        
        // Carrusel
        cargando_productos: "Loading products...",
        no_productos: "No products available",
        
        // Producto destacado
        producto_destacado: "Featured Product",
        disponible: "Available",
        no_disponible: "Not available",
        btn_agregar_carrito: "Add to Cart",
        
        // Carrito
        carrito_compras: "Shopping Cart",
        carrito_vacio: "Your cart is empty",
        total: "Total:",
        btn_finalizar: "Checkout",
        eliminar: "Remove",
        
        // Otros productos
        otros_productos: "Other Products",
        
        // Acerca de
        acerca_titulo: "About Ghuali",
        acerca_p1: "At Ghuali we believe that the best way to express yourself is through what you wear. We are a company dedicated to the design and creation of personalized products, where every detail counts and every garment has a story to tell.",
        acerca_p2: "We specialize in items such as shirts, suspenders and other accessories, all designed to adapt to your style, your personality and your ideas. Whether it's an elegant, daring, minimalist or totally unique design, at Ghuali we transform your ideas into real products, made with care and dedication.",
        acerca_p3: "We work with quality materials and bet on a close creative process, where the client is part of the final result. Our goal is not only to sell products, but to create pieces that represent you and make you feel authentic.",
        acerca_p4: "At Ghuali, personalization is not an extra: it is our essence.",
        
        // Footer
        footer_derechos: "Â©2008 Fashion. All rights reserved",
        
        // Modal Login
        modal_login_titulo: "Log in",
        modal_email: "Email",
        modal_contrasena: "Password",
        modal_entrar: "Enter",
        modal_no_cuenta: "Don't have an account?",
        modal_registrate: "Sign up",
        
        // Modal Registro
        modal_registro_titulo: "User registration",
        modal_dni: "ID / NIE",
        modal_dni_info: "Valid format: 12345678Z or X1234567L",
        modal_nombre: "Name",
        modal_nombre_info: "Must start with capital letter",
        modal_email_info: "Must be a valid email",
        modal_telefono: "Phone",
        modal_telefono_info: "Must start with 6 or 7 (e.g.: 622334455)",
        modal_iban: "IBAN",
        modal_iban_info: "Example: ES7620770024003102575766",
        modal_contrasena_info: "12 characters, letters, numbers and a symbol",
        modal_registrarse: "Sign up",
        modal_ya_cuenta: "Already have an account?",
        modal_inicia_sesion: "Log in",
        
        // Alertas
        alert_agregado: "added to cart",
        alert_sesion_cerrada: "Session closed successfully",
        alert_bienvenido: "Welcome",
        alert_error: "Error:",
        alert_error_servidor: "Error connecting to server",
        alert_error_sesion: "Error logging out",
        alert_corregir_errores: "Please correct the errors in the form",
        alert_registrado: "User registered successfully\nYou can now log in",
        alert_cerrar_sesion: "Do you want to log out?"
    }
};

// Idioma actual (por defecto espaÃ±ol)
let idiomaActual = localStorage.getItem('idioma') || 'es';

// FunciÃ³n para traducir la pÃ¡gina
function traducirPagina() {
    const t = traducciones[idiomaActual];
    
    // Navbar
    const navbarLinks = document.querySelectorAll('.navbar a');
    if (navbarLinks.length >= 3) {
        navbarLinks[0].textContent = t.nav_logo;
        navbarLinks[1].textContent = t.nav_productos;
        navbarLinks[2].textContent = t.nav_acerca;
    }
    
    const btnIdioma = document.getElementById('btnIdioma');
    if (btnIdioma) btnIdioma.textContent = t.nav_idioma;
    
    const linkCarrito = document.getElementById('linkCarrito');
    if (linkCarrito) linkCarrito.textContent = t.nav_carrito;
    
    // Producto destacado
    const tituloDestacado = document.querySelector('.producto-destacado h2');
    if (tituloDestacado) tituloDestacado.textContent = t.producto_destacado;
    
    const btnAgregarDestacado = document.getElementById('btnAgregarDestacado');
    if (btnAgregarDestacado) btnAgregarDestacado.textContent = t.btn_agregar_carrito;
    
    // Carrito
    const tituloCarrito = document.querySelector('.carrito-section h2');
    if (tituloCarrito) tituloCarrito.textContent = t.carrito_compras;
    
    const carritoVacio = document.querySelector('.carrito-vacio p');
    if (carritoVacio) carritoVacio.textContent = t.carrito_vacio;
    
    const totalLabel = document.querySelector('.carrito-total h3');
    const totalCarritoSpan = document.getElementById('totalCarrito');
    if (totalLabel && totalCarritoSpan) {
        const totalValor = totalCarritoSpan.textContent;
        totalLabel.innerHTML = `${t.total} â‚¬<span id="totalCarrito">${totalValor}</span>`;
    }
    
    const btnFinalizar = document.querySelector('.btn-finalizar');
    if (btnFinalizar) btnFinalizar.textContent = t.btn_finalizar;
    
    // Otros productos
    const tituloOtros = document.querySelector('.otros-productos h2');
    if (tituloOtros) tituloOtros.textContent = t.otros_productos;
    
    // Acerca de
    const tituloAcerca = document.querySelector('.acerca-de h2');
    if (tituloAcerca) tituloAcerca.textContent = t.acerca_titulo;
    
    const acercaParrafos = document.querySelectorAll('.acerca-contenido p');
    if (acercaParrafos.length >= 4) {
        acercaParrafos[0].textContent = t.acerca_p1;
        acercaParrafos[1].textContent = t.acerca_p2;
        acercaParrafos[2].textContent = t.acerca_p3;
        acercaParrafos[3].innerHTML = `<strong>${t.acerca_p4}</strong>`;
    }
    
    // Footer
    const footerParrafos = document.querySelectorAll('footer p');
    if (footerParrafos.length >= 4) {
        footerParrafos[3].textContent = t.footer_derechos;
    }
    
    // Modal Login
    const modalLoginH2 = document.querySelector('#modalLogin h2');
    if (modalLoginH2) modalLoginH2.textContent = t.modal_login_titulo;
    
    const modalLoginEmail = document.querySelector('#modalLogin input[name="email"]');
    if (modalLoginEmail) modalLoginEmail.placeholder = t.modal_email;
    
    const modalLoginPass = document.querySelector('#modalLogin input[name="contrasena"]');
    if (modalLoginPass) modalLoginPass.placeholder = t.modal_contrasena;
    
    const modalLoginBtn = document.querySelector('#modalLogin button[type="submit"]');
    if (modalLoginBtn) modalLoginBtn.textContent = t.modal_entrar;
    
    const modalLoginP = document.querySelector('#modalLogin p');
    if (modalLoginP) {
        modalLoginP.innerHTML = `${t.modal_no_cuenta} <a class="link" id="abrirRegistroDesdeLogin">${t.modal_registrate}</a>`;
    }
    
    // Modal Registro
    const modalRegistroH2 = document.querySelector('#modalRegistro h2');
    if (modalRegistroH2) modalRegistroH2.textContent = t.modal_registro_titulo;
    
    const modalRegistroDni = document.querySelector('#modalRegistro input[name="dni"]');
    if (modalRegistroDni) modalRegistroDni.placeholder = t.modal_dni;
    
    const modalRegistroName = document.querySelector('#modalRegistro input[name="name"]');
    if (modalRegistroName) modalRegistroName.placeholder = t.modal_nombre;
    
    const modalRegistroEmail = document.querySelector('#modalRegistro input[name="email"]');
    if (modalRegistroEmail) modalRegistroEmail.placeholder = t.modal_email;
    
    const modalRegistroTel = document.querySelector('#modalRegistro input[name="telefono"]');
    if (modalRegistroTel) modalRegistroTel.placeholder = t.modal_telefono;
    
    const modalRegistroIban = document.querySelector('#modalRegistro input[name="IBAN"]');
    if (modalRegistroIban) modalRegistroIban.placeholder = t.modal_iban;
    
    const modalRegistroPass = document.querySelector('#modalRegistro input[name="contrasena"]');
    if (modalRegistroPass) modalRegistroPass.placeholder = t.modal_contrasena;
    
    const modalRegistroParrafos = document.querySelectorAll('#modalRegistro form p');
    if (modalRegistroParrafos.length >= 6) {
        modalRegistroParrafos[0].textContent = t.modal_dni_info;
        modalRegistroParrafos[1].textContent = t.modal_nombre_info;
        modalRegistroParrafos[2].textContent = t.modal_email_info;
        modalRegistroParrafos[3].textContent = t.modal_telefono_info;
        modalRegistroParrafos[4].textContent = t.modal_iban_info;
        modalRegistroParrafos[5].textContent = t.modal_contrasena_info;
    }
    
    const modalRegistroBtn = document.querySelector('#modalRegistro button[type="submit"]');
    if (modalRegistroBtn) modalRegistroBtn.textContent = t.modal_registrarse;
    
    const modalRegistroP = document.querySelector('#modalRegistro > p');
    if (modalRegistroP) {
        modalRegistroP.innerHTML = `${t.modal_ya_cuenta} <span class="link" id="abrirLoginDesdeRegistro">${t.modal_inicia_sesion}</span>`;
    }
    
    // Re-asignar eventos de los modales despuÃ©s de traducir
    reasignarEventosModales();
    
    // Actualizar botones de productos
    actualizarBotonesProductos();
    
    // Actualizar botones del carrito
    actualizarBotonesCarrito();
}

function reasignarEventosModales() {
    const btnAbrirRegistro = document.getElementById('abrirRegistroDesdeLogin');
    if (btnAbrirRegistro) {
        btnAbrirRegistro.addEventListener('click', (e) => {
            e.preventDefault();
            document.getElementById('modalRegistro').style.display = "flex";
            document.getElementById('modalLogin').style.display = "none";
        });
    }
    
    const btnAbrirLogin = document.getElementById('abrirLoginDesdeRegistro');
    if (btnAbrirLogin) {
        btnAbrirLogin.addEventListener('click', (e) => {
            e.preventDefault();
            document.getElementById('modalLogin').style.display = "flex";
            document.getElementById('modalRegistro').style.display = "none";
        });
    }
}

function actualizarBotonesProductos() {
    const t = traducciones[idiomaActual];
    document.querySelectorAll('.btn-agregar-producto').forEach(btn => {
        btn.textContent = t.btn_agregar_carrito;
    });
}

function actualizarBotonesCarrito() {
    const t = traducciones[idiomaActual];
    document.querySelectorAll('.btn-eliminar').forEach(btn => {
        btn.textContent = t.eliminar;
    });
}

// Cambiar idioma
function cambiarIdioma() {
    idiomaActual = idiomaActual === 'es' ? 'en' : 'es';
    localStorage.setItem('idioma', idiomaActual);
    traducirPagina();
}